/*
 Contains the following:
 https://gist.github.com/elijahmanor/6452535
 http://www.paulirish.com/2011/requestanimationframe-for-smart-animating/
 https://github.com/taylorhakes/promise-polyfill
 https://github.com/github/fetch
*/
if(Element&&!Element.prototype.matches){var proto=Element.prototype;proto.matches=proto.matchesSelector||proto.mozMatchesSelector||proto.msMatchesSelector||proto.oMatchesSelector||proto.webkitMatchesSelector};(function(){for(var e=0,f=["webkit","moz"],g=0;g<f.length&&!window.requestAnimationFrame;++g)window.requestAnimationFrame=window[f[g]+"RequestAnimationFrame"],window.cancelAnimationFrame=window[f[g]+"CancelAnimationFrame"]||window[f[g]+"CancelRequestAnimationFrame"];window.requestAnimationFrame||(window.requestAnimationFrame=function(b,f){var g=(new Date).getTime(),l=Math.max(0,16-(g-e)),p=window.setTimeout(function(){b(g+l)},l);e=g+l;return p});window.cancelAnimationFrame||(window.cancelAnimationFrame=
function(b){clearTimeout(b)})})();(function(e){function f(){}function g(a,d){return function(){a.apply(d,arguments)}}function b(a){if("object"!==typeof this)throw new TypeError("Promises must be constructed via new");if("function"!==typeof a)throw new TypeError("not a function");this._state=0;this._value=void 0;this._deferreds=[];v(a,this)}function r(a,d){for(;3===a._state;)a=a._value;0===a._state?a._deferreds.push(d):k(function(){var b=1===a._state?d.onFulfilled:d.onRejected;if(null===b)(1===a._state?t:l)(d.promise,a._value);else{var m;
try{m=b(a._value)}catch(c){l(d.promise,c);return}t(d.promise,m)}})}function t(a,d){try{if(d===a)throw new TypeError("A promise cannot be resolved with itself.");if(d&&("object"===typeof d||"function"===typeof d)){var w=d.then;if(d instanceof b){a._state=3;a._value=d;p(a);return}if("function"===typeof w){v(g(w,d),a);return}}a._state=1;a._value=d;p(a)}catch(m){l(a,m)}}function l(a,d){a._state=2;a._value=d;p(a)}function p(a){for(var d=0,b=a._deferreds.length;d<b;d++)r(a,a._deferreds[d]);a._deferreds=
null}function n(a,d,b){this.onFulfilled="function"===typeof a?a:null;this.onRejected="function"===typeof d?d:null;this.promise=b}function v(a,d){var b=!1;try{a(function(a){b||(b=!0,t(d,a))},function(a){b||(b=!0,l(d,a))})}catch(m){b||(b=!0,l(d,m))}}var x=setTimeout,k="function"===typeof setImmediate&&setImmediate||function(a){x(a,1)},y=Array.isArray||function(a){return"[object Array]"===Object.prototype.toString.call(a)};b.prototype["catch"]=function(a){return this.then(null,a)};b.prototype.then=function(a,
d){var e=new b(f);r(this,new n(a,d,e));return e};b.all=function(){var a=Array.prototype.slice.call(1===arguments.length&&y(arguments[0])?arguments[0]:arguments);return new b(function(b,e){function m(q,u){try{if(u&&("object"===typeof u||"function"===typeof u)){var f=u.then;if("function"===typeof f){f.call(u,function(c){m(q,c)},e);return}}a[q]=u;0===--c&&b(a)}catch(h){e(h)}}if(0===a.length)return b([]);for(var c=a.length,q=0;q<a.length;q++)m(q,a[q])})};b.resolve=function(a){return a&&"object"===typeof a&&
a.constructor===b?a:new b(function(b){b(a)})};b.reject=function(a){return new b(function(b,e){e(a)})};b.race=function(a){return new b(function(b,e){for(var f=0,c=a.length;f<c;f++)a[f].then(b,e)})};b._setImmediateFn=function(a){k=a};"undefined"!==typeof module&&module.exports?module.exports=b:e.Promise||(e.Promise=b)})(this);(function(e){function f(c){"string"!==typeof c&&(c=String(c));if(/[^a-z0-9\-#$%&'*+.\^_`|~]/i.test(c))throw new TypeError("Invalid character in header field name");return c.toLowerCase()}function g(c){"string"!==typeof c&&(c=String(c));return c}function b(c){this.map={};c instanceof b?c.forEach(function(c,a){this.append(a,c)},this):c&&Object.getOwnPropertyNames(c).forEach(function(a){this.append(a,c[a])},this)}function r(c){if(c.bodyUsed)return Promise.reject(new TypeError("Already read"));c.bodyUsed=
!0}function t(c){return new Promise(function(a,b){c.onload=function(){a(c.result)};c.onerror=function(){b(c.error)}})}function l(c){var a=new FileReader;a.readAsArrayBuffer(c);return t(a)}function p(){this.bodyUsed=!1;this._initBody=function(c){this._bodyInit=c;if("string"===typeof c)this._bodyText=c;else if(d.blob&&Blob.prototype.isPrototypeOf(c))this._bodyBlob=c;else if(d.formData&&FormData.prototype.isPrototypeOf(c))this._bodyFormData=c;else if(!c)this._bodyText="";else if(!d.arrayBuffer||!ArrayBuffer.prototype.isPrototypeOf(c))throw Error("unsupported BodyInit type");
this.headers.get("content-type")||("string"===typeof c?this.headers.set("content-type","text/plain;charset=UTF-8"):this._bodyBlob&&this._bodyBlob.type&&this.headers.set("content-type",this._bodyBlob.type))};d.blob?(this.blob=function(){var c=r(this);if(c)return c;if(this._bodyBlob)return Promise.resolve(this._bodyBlob);if(this._bodyFormData)throw Error("could not read FormData body as blob");return Promise.resolve(new Blob([this._bodyText]))},this.arrayBuffer=function(){return this.blob().then(l)},
this.text=function(){var c=r(this);if(c)return c;if(this._bodyBlob){var c=this._bodyBlob,a=new FileReader;a.readAsText(c);return t(a)}if(this._bodyFormData)throw Error("could not read FormData body as text");return Promise.resolve(this._bodyText)}):this.text=function(){var c=r(this);return c?c:Promise.resolve(this._bodyText)};d.formData&&(this.formData=function(){return this.text().then(v)});this.json=function(){return this.text().then(JSON.parse)};return this}function n(c,a){a=a||{};var d=a.body;
if(n.prototype.isPrototypeOf(c)){if(c.bodyUsed)throw new TypeError("Already read");this.url=c.url;this.credentials=c.credentials;a.headers||(this.headers=new b(c.headers));this.method=c.method;this.mode=c.mode;d||(d=c._bodyInit,c.bodyUsed=!0)}else this.url=c;this.credentials=a.credentials||this.credentials||"omit";if(a.headers||!this.headers)this.headers=new b(a.headers);var e=a.method||this.method||"GET",f=e.toUpperCase();this.method=-1<w.indexOf(f)?f:e;this.mode=a.mode||this.mode||null;this.referrer=
null;if(("GET"===this.method||"HEAD"===this.method)&&d)throw new TypeError("Body not allowed for GET or HEAD requests");this._initBody(d)}function v(c){var a=new FormData;c.trim().split("&").forEach(function(c){if(c){var b=c.split("=");c=b.shift().replace(/\+/g," ");b=b.join("=").replace(/\+/g," ");a.append(decodeURIComponent(c),decodeURIComponent(b))}});return a}function x(c){var a=new b;c.getAllResponseHeaders().trim().split("\n").forEach(function(c){var b=c.trim().split(":");c=b.shift().trim();
b=b.join(":").trim();a.append(c,b)});return a}function k(c,a){a||(a={});this.type="default";this.status=a.status;this.ok=200<=this.status&&300>this.status;this.statusText=a.statusText;this.headers=a.headers instanceof b?a.headers:new b(a.headers);this.url=a.url||"";this._initBody(c)}if(!e.fetch){var y="Symbol"in e&&"iterator"in Symbol,a;if(a="FileReader"in e&&"Blob"in e)try{new Blob,a=!0}catch(c){a=!1}var d={iterable:y,blob:a,formData:"FormData"in e,arrayBuffer:"ArrayBuffer"in e};b.prototype.append=
function(c,a){c=f(c);a=g(a);var b=this.map[c];b||(b=[],this.map[c]=b);b.push(a)};b.prototype["delete"]=function(c){delete this.map[f(c)]};b.prototype.get=function(c){return(c=this.map[f(c)])?c[0]:null};b.prototype.getAll=function(c){return this.map[f(c)]||[]};b.prototype.has=function(c){return this.map.hasOwnProperty(f(c))};b.prototype.set=function(c,a){this.map[f(c)]=[g(a)]};b.prototype.forEach=function(c,a){Object.getOwnPropertyNames(this.map).forEach(function(b){this.map[b].forEach(function(d){c.call(a,
d,b,this)},this)},this)};b.prototype.keys=function(){var c=[];this.forEach(function(a,b){c.push(b)});var a={next:function(){var a=c.shift();return{done:void 0===a,value:a}}};d.iterable&&(a[Symbol.iterator]=function(){return a});return a};b.prototype.values=function(){var a=[];this.forEach(function(b){a.push(b)});var b={next:function(){var b=a.shift();return{done:void 0===b,value:b}}};d.iterable&&(b[Symbol.iterator]=function(){return b});return b};b.prototype.entries=function(){var a=[];this.forEach(function(b,
d){a.push([d,b])});var b={next:function(){var b=a.shift();return{done:void 0===b,value:b}}};d.iterable&&(b[Symbol.iterator]=function(){return b});return b};d.iterable&&(b.prototype[Symbol.iterator]=b.prototype.entries);var w="DELETE GET HEAD OPTIONS POST PUT".split(" ");n.prototype.clone=function(){return new n(this)};p.call(n.prototype);p.call(k.prototype);k.prototype.clone=function(){return new k(this._bodyInit,{status:this.status,statusText:this.statusText,headers:new b(this.headers),url:this.url})};
k.error=function(){var a=new k(null,{status:0,statusText:""});a.type="error";return a};var m=[301,302,303,307,308];k.redirect=function(a,b){if(-1===m.indexOf(b))throw new RangeError("Invalid status code");return new k(null,{status:b,headers:{location:a}})};e.Headers=b;e.Request=n;e.Response=k;e.fetch=function(a,b){return new Promise(function(e,f){var g;g=n.prototype.isPrototypeOf(a)&&!b?a:new n(a,b);var h=new XMLHttpRequest;h.onload=function(){var a=h.status,b=h.statusText,c=x(h),d;d="responseURL"in
h?h.responseURL:/^X-Request-URL:/m.test(h.getAllResponseHeaders())?h.getResponseHeader("X-Request-URL"):void 0;e(new k("response"in h?h.response:h.responseText,{status:a,statusText:b,headers:c,url:d}))};h.onerror=function(){f(new TypeError("Network request failed"))};h.open(g.method,g.url,!0);"include"===g.credentials&&(h.withCredentials=!0);"responseType"in h&&d.blob&&(h.responseType="blob");g.headers.forEach(function(a,b){h.setRequestHeader(b,a)});h.send("undefined"===typeof g._bodyInit?null:g._bodyInit)})};
e.fetch.polyfill=!0}})("undefined"!==typeof self?self:this);
